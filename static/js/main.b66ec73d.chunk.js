(this.webpackJsonp4=this.webpackJsonp4||[]).push([[0],{62:function(e,t,a){e.exports=a(92)},67:function(e,t,a){},72:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(30),c=a.n(l),o=(a(67),a(10)),i=a(20),s=a(8),m={loading:!1,covidData:[],countryData:[]};var u={loading:!1,globals:[],error:""},d={loading:!1,news:[],error:""},E={modalOpen:!1,modalContent:{}},p=Object(i.combineReducers)({covid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_COVID_REQUEST":return{loading:!0};case"FETCH_COVID_SUCCESS":return Object(s.a)(Object(s.a)({},e),{},{covidData:t.payload,error:"",loading:!1});case"FETCH_COVID_FAIL":return Object(s.a)(Object(s.a)({},e),{},{error:t.payload,loading:!1});default:return e}},global:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_GLOBALS_REQUEST":return Object(s.a)(Object(s.a)({},e),{},{loading:!0});case"FETCH_GLOBALS_SUCCESS":return Object(s.a)(Object(s.a)({},e),{},{globals:t.payload,error:"",loading:!1});case"FETCH_GLOBALS_FAIL":return Object(s.a)(Object(s.a)({},e),{},{error:t.payload,loading:!1});default:return e}},news:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_NEWS_REQUEST":return Object(s.a)(Object(s.a)({},e),{},{loading:!0});case"FETCH_NEWS_SUCCESS":return Object(s.a)(Object(s.a)({},e),{},{news:t.payload,error:"",loading:!1});case"FETCH_NEWS_FAIL":return Object(s.a)(Object(s.a)({},e),{},{error:t.payload,loading:!1});default:return e}},modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_MODAL":return Object(s.a)(Object(s.a)({},e),{},{modalOpen:!e.modalOpen});case"UPDATE_MODAL_CONTENT":return Object(s.a)(Object(s.a)({},e),{},{modalContent:t.payload});default:return e}}}),f=a(52),v=a(53),b=Object(i.createStore)(p,Object(v.composeWithDevTools)(Object(i.applyMiddleware)(f.a))),g=(a(72),a(18)),h=a.n(g),O=a(23),y=a(24),j=a.n(y),C=a(15),w=a(26),N=a(35),S=a(12),_=a(55);function T(e){var t=e.country;return r.a.createElement("div",{className:"PopUp"},r.a.createElement("ul",{className:"popup-list"},r.a.createElement("li",{className:"popup-item"},r.a.createElement("h3",null,t.location)),r.a.createElement(N.a,{locale:"en"},r.a.createElement("li",{className:"popup-item"},r.a.createElement("p",null,"Confirmed:"),r.a.createElement("h4",null,r.a.createElement(S.a,{value:t.confirmed}))),r.a.createElement("li",{className:"popup-item"},r.a.createElement("p",null,"Deaths:"),r.a.createElement("h4",{style:{color:" #ff3535"}},r.a.createElement(S.a,{value:t.dead}))),r.a.createElement("li",{className:"popup-item"},r.a.createElement("p",null,"Recovered"),r.a.createElement("h4",{style:{color:"#178717"}},r.a.createElement(S.a,{value:t.recovered}))))))}function k(){return r.a.createElement("div",{className:"Spinner"})}function F(e){var t=e.covid,a=Object(n.useState)({lat:39.8283,lng:60,zoom:1,maxZoom:12}),l=Object(C.a)(a,2),c=l[0],o=l[1],i=Object(n.useState)(!1),m=Object(C.a)(i,2),u=m[0],d=m[1],E=Object(n.useState)(null),p=Object(C.a)(E,2),f=p[0],v=p[1],b=Object(n.useRef)(),g=t.covidData.map((function(e){return{type:"Feature",properties:{cluster:!1,location:e.location,confirmed:e.confirmed,recovered:e.recovered,dead:e.dead,updated:e.updated,code:e.country_code,lat:e.latitude,lng:e.longitude},geometry:{type:"Point",coordinates:[e.longitude,e.latitude]}}})),h=b.current?b.current.getMap().getBounds().toArray().flat():null,O=Object(_.a)({points:g,zoom:c.zoom,bounds:h,options:{radius:80,maxZoom:c.maxZoom}}),y=O.clusters,j=O.supercluster;Object(n.useEffect)((function(){var e=function(e){"Escape"===e.key&&v(null)};return window.addEventListener("keydown",e),function(t){window.removeEventListener("keydown",e)}}),[]);var F=r.a.createElement("div",{className:"map-features"},y.map((function(e){var t=Object(C.a)(e.geometry.coordinates,2),a=t[0],n=t[1],l=e.properties,i=l.cluster,m=l.point_count,u=e.properties,d=u.confirmed,E=u.code;function p(){var t=Math.min(j.getClusterExpansionZoom(e.id),12);o(Object(s.a)(Object(s.a)({},c),{},{latitude:n,longitude:a,zoom:t,transitionInterpolator:new w.a({speed:2}),transitionDuration:"auto"}))}function f(){v(e.properties)}return i?r.a.createElement(w.b,{key:e.id,latitude:n,longitude:a},m<20?r.a.createElement("div",{onClick:function(){return p()},className:"cluster-marker",style:{width:"25px",height:"25px"}},m):r.a.createElement("div",{onClick:function(){return p()},className:"cluster-marker",style:{width:"".concat(m/g.length*7*50,"px"),height:"".concat(m/g.length*7*50,"px")}},m)):r.a.createElement(w.b,{key:E,latitude:n,longitude:a},r.a.createElement(N.a,{locale:"en"},d>0&&d<1e4&&r.a.createElement("div",{className:"marker marker-small",onClick:function(){f()}},r.a.createElement(S.a,{value:d})),d>1e4&&d<3e4&&r.a.createElement("div",{className:"marker marker-medium",onClick:function(){f()}},r.a.createElement(S.a,{value:d})),d>5e4&&r.a.createElement("div",{className:"marker marker-large",onClick:function(){f()}},r.a.createElement(S.a,{value:d}))))})));return r.a.createElement("div",null,r.a.createElement(w.d,Object.assign({},c,{mapboxApiAccessToken:"pk.eyJ1IjoiZ2FpemEiLCJhIjoiY2tjbnRibjh6MGVqcDJ5b2Fqa3RlcjF0dCJ9._4VCTwYCfUIhO-YB6kloVw",mapStyle:"mapbox://styles/gaiza/ckco24rjf35zq1irwzq6dl5td",onViewportChange:function(e){return o(e)},width:"100vw",height:"100vh",ref:b,onLoad:function(){d(!0)}}),u?F:r.a.createElement(k,null),f?r.a.createElement(w.c,{onClose:function(){return v(null)},latitude:f.lat,longitude:f.lng},r.a.createElement(T,{country:f})):null))}var L=a(34),x=a.n(L);function D(e){var t=e.globalData,a=Object(n.useState)([]),l=Object(C.a)(a,2),c=l[0],o=l[1];Object(n.useEffect)((function(){o(t.globals)}),[t.globals]);var i={duration:1.5,start:0,separator:","};return 0===c.length?r.a.createElement("div",{className:"Menu"},"Loading..."):r.a.createElement("div",{className:"Menu"},r.a.createElement("ul",{className:"menu-list"},r.a.createElement(N.a,{locale:"en"},r.a.createElement("li",{className:"menu-item"},r.a.createElement("p",null,"Confirmed: "),r.a.createElement("div",null,r.a.createElement("h3",{style:{color:"white"}},r.a.createElement(x.a,Object.assign({},i,{end:c.TotalConfirmed}))),r.a.createElement("span",{className:"small-text"},"+",r.a.createElement(S.a,{value:c.NewConfirmed})," "))),r.a.createElement("li",{className:"menu-item"},r.a.createElement("p",null,"Deaths: "),r.a.createElement("div",null,r.a.createElement("h3",{style:{color:"#ff3535"}},r.a.createElement(x.a,Object.assign({},i,{end:c.TotalDeaths}))),r.a.createElement("span",{className:"small-text"},"+",r.a.createElement(S.a,{value:c.NewDeaths})))),r.a.createElement("li",{className:"menu-item"},r.a.createElement("p",null,"Recovered: "),r.a.createElement("div",null,r.a.createElement("h3",{style:{color:"#24d024"}},r.a.createElement(x.a,Object.assign({},i,{end:c.TotalRecovered}))),r.a.createElement("span",{className:"small-text"},"+",r.a.createElement(S.a,{value:c.NewRecovered})))))))}var A=function(e){return{type:"TOGGLE_MODAL",payload:e}};function H(e){var t=e.story,a=e.clickHandler;return r.a.createElement("li",{className:"news-item",onClick:function(){return a(t)}},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("p",{className:"news-item-date"},t.publishedDateTime.split("T")[0]),r.a.createElement("h3",{className:"news-item-provider"},t.provider.name)),r.a.createElement("p",{className:"news-item-title"},t.title)))}function U(e){var t=e.news,a=Object(n.useState)([]),l=Object(C.a)(a,2),c=l[0],i=l[1],s=Object(o.c)((function(e){return e.modal})),m=Object(o.b)();function u(e){s.modalOpen||m(A()),m({type:"UPDATE_MODAL_CONTENT",payload:e})}return Object(n.useEffect)((function(){i(t.news.news)}),[t.news.news]),r.a.createElement("div",{className:"News"},0===c.length&&r.a.createElement("p",null,"Fetching news..."),r.a.createElement("ul",{className:"news-list"},c.map((function(e){return r.a.createElement(H,{key:e.title,story:e,clickHandler:u})}))))}function I(e){var t=e.news,a=e.global;return r.a.createElement("div",{className:"Sidebar"},r.a.createElement(D,{globalData:a}),r.a.createElement(U,{news:t}))}var R=a(56);function B(){return r.a.createElement("div",{className:"Title"},r.a.createElement("h1",null,"Covid-19 Tracker"),r.a.createElement("h3",null,"\u614c\u3066\u306a\u3044\u3067\uff01"),r.a.createElement("div",{className:"social"},r.a.createElement("p",null,"Bryan Race"),r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/BrynRac"},r.a.createElement(R.a,null))))}function G(e){var t=e.story,a=Object(o.b)();return r.a.createElement("div",{className:"Modal"},t.images&&r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:t.webUrl},r.a.createElement("div",{className:"modal-image"},r.a.createElement("img",{className:"image",alt:t.title,src:t.images[0].url}))),r.a.createElement("div",{className:"modal-text"},r.a.createElement("hr",{style:{float:"right",width:"10%"}}),r.a.createElement("h4",{style:{fontFamily:"'Lato', san-serif"}},t.provider.name),r.a.createElement("h3",{style:{float:"left"}},t.title),t.provider.authors&&r.a.createElement("p",null,"By ",t.provider.authors),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"150px",paddingTop:"0.5rem"}},r.a.createElement("p",null,t.publishedDateTime.split("T")[0]),r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:t.webUrl},"Source")),r.a.createElement("p",null," \u2014 ",t.excerpt)),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"1rem",alignItems:"center"}},r.a.createElement("button",{onClick:function(){a(A())},className:"modal-button"},"Close"),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("h4",null,t.heat),r.a.createElement("span",{style:{marginLeft:"10px"},role:"img","aria-label":"heat"},"\ud83d\udd25"))))}function M(){var e=Object(o.c)((function(e){return e.covid})),t=Object(o.c)((function(e){return e.news})),a=Object(o.c)((function(e){return e.global})),l=Object(o.c)((function(e){return e.modal})),c=Object(o.b)();return Object(n.useEffect)((function(){c(function(){var e=Object(O.a)(h.a.mark((function e(t){var a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,t({type:"FETCH_COVID_REQUEST"}),e.next=5,j.a.get("https://www.trackcorona.live/api/countries");case 5:a=e.sent,n=a.data.data,t({type:"FETCH_COVID_SUCCESS",payload:n}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),r=e.t0.message,t({type:"FETCH_COVID_FAIL",payload:r});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log("Error in useEffect: ",e.message)})),c(function(){var e=Object(O.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,t({type:"FETCH_GLOBALS_REQUEST"}),e.next=5,j.a.get("https://api.covid19api.com/summary");case 5:a=e.sent,t({type:"FETCH_GLOBALS_SUCCESS",payload:a.data.Global}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),n=e.t0.message,t({type:"FETCH_GLOBALS_FAIL",payload:n});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log("Error in useEffect: ",e.message)})),c(function(){var e=Object(O.a)(h.a.mark((function e(t){var a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=2,t({type:"FETCH_NEWS_REQUEST"}),e.next=6,j()({url:"https://api.smartable.ai/coronavirus/news/US",headers:{"Cache-Control":"no-cache","Subscription-Key":"74c9071c1cf746e28270e5739e74644d"}});case 6:a=e.sent,n=a.data,t({type:"FETCH_NEWS_SUCCESS",payload:n}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),r=e.t0.message,t({type:"FETCH_NEWS_FAIL",payload:r});case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log("Error in useEffect: ",e.message)}))}),[c]),r.a.createElement("div",{className:"Content"},t.loading||a.loading?r.a.createElement("p",null,"Fetching data..."):r.a.createElement(I,{news:t,global:a}),r.a.createElement("div",{className:"map-container"},e.loading?r.a.createElement(k,null):r.a.createElement(F,{covid:e})),l.modalOpen&&r.a.createElement(G,{story:l.modalContent}),r.a.createElement(B,null))}var V=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(M,null))};c.a.render(r.a.createElement(o.a,{store:b},r.a.createElement(V,null)),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.b66ec73d.chunk.js.map